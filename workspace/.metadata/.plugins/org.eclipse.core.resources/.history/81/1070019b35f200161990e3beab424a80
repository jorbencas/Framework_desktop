package Exercici_9.Modules.Users.Model.BLL.BLL_users.files_users.Normal.Default;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;
import javax.swing.JOptionPane;
import Exercici_9.Modules.Users.Model.Classes.User;
import Exercici_9.Modules.Users.Model.Classes.Singleton;


public class n_txt {

	public static void gernera_txt_auto(){
		String PATH = null;
		        
		        try {
		            PATH = new java.io.File(".").getCanonicalPath()
		                    + "/src/Exercici_9/Modules/Users/Model/file_users/Normal/files/User.txt";
		        } catch (IOException e) {
		            e.printStackTrace();
		        }

		        if (Singleton.userregister.size() > 0) {
			        try {
			            File file;
			            
			            file = new File(PATH);
			            
			            FileOutputStream FOS=new FileOutputStream(file);
						ObjectOutputStream OOS=new ObjectOutputStream(FOS);
						OOS.writeObject(Singleton.userregister);
						OOS.close();
			            
			        } catch (Exception e) {
			        	JOptionPane.showMessageDialog(null,"errorsave_txt", "errortitle", JOptionPane.ERROR_MESSAGE);
			        }
		        } else {
		            File path = new File(PATH);

		            path.delete();
		        }
			}
			public static void obri_txt_auto (){
				String PATH = null;
		        try {
		            File file;
		            PATH = new java.io.File(".").getCanonicalPath()
		                    + "/src/Exercici_9/Modules/Users/Utils/file_users/Normal/files/User.txt";
		            file = new File(PATH);
		            
		            FileInputStream FIS=new FileInputStream(file);
		    		ObjectInputStream OIS=new ObjectInputStream(FIS);
		    		Singleton.userregister = (ArrayList<User>)OIS.readObject();
		    		OIS.close();
		            
		        } catch (Exception e) {
		        	JOptionPane.showMessageDialog(null, "erroropen_txt", "errortitle", JOptionPane.ERROR_MESSAGE);
		        }
			}
}
